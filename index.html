<!doctype html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml"
      xmlns:fb="http://ogp.me/ns/fb#">
  <head>
  <title>Meet Cubey!</title>
   <!--Facebook thumbnail image-->
      <meta property="og:image" content="img/marshmallow.png"/>
  <style>
      @import url(https://fonts.googleapis.com/css?family=Montserrat);

  .cube {
    position: absolute;
    top: 172px;
    left: 43px;
    display: none;
  }
  /*#main {
  	float: left;
  }
  #side {
  	float: left;
  	padding-top: 120px;
  	height: 100%;
  }*/
  body {
    background-image:url("img/background.png");
    background-repeat:no-repeat;
    overflow:hidden;

  }
  h2{
    font: 24px Montserrat;
    text-align:center;
    color:#111111;
  }

  #arrowButton{
    background-color: #AAAAAA;
    -moz-border-radius: 3px;
    -webkit-border-radius: 3px;
    border-radius:3px;
    color: #FAFAFA;
    font-family: Montserrat;
    font-size: 14px;
    text-decoration: none;
    cursor: pointer;
    border:3px;
    border-color:#999999;
}
  }
  </style>
</head>

<body>
<h2>Meet Cubey</h2>

<link rel="stylesheet" type="text/css" href="drag.css">

<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src='drag.js' type='text/javascript'></script>
<script src='sentiment.js' type='text/javascript'></script>

<center>
<input id='textInput' type='text'><button id="arrowButton" type="button">Talk to Cubey</button>
</center>

<br>
<div id="main">
	<img class='cube' id='hi' src='img/hi.png'>

	<img class='cube' id='sad' src='img/sad.png'>

	<img class='cube' id='verySad' src='img/verySad.png'>

  <img class='cube' id='superhappy' src='img/birthday.png'>

	<!-- <img class='cube' id='originalCube' src='http://i.imgur.com/vL1iaYj.jpg' style='left: 80px'>
	<br><br><br><br><br> -->
	<canvas id="originalCube" style='position: absolute;'></canvas>

	<img class='dragme' style='position: absolute; top:44px; left: 938px; width: 100px;'src='img/marshmallow.png'>
  <img id='icecream' class='dragme' style='position: absolute; top: 176px; left: 949px; width: 70px;'src='img/icecream.png'>
</div>




<script>
$('#arrowButton').click(function() {
  var text = $('#textInput').val().toLowerCase();
  $('#textInput').val('');
  
  if(text.indexOf('hi') > -1 || text.indexOf('hello') > -1) {
    $("#hi").css("display", "block");
    $('#sad').css('display', 'none');
    $('#verySad').css('display', 'none');
    $('#originalCube').css('display', 'none');
    $('#superhappy').css('display', 'none');
  }
  else if(text.indexOf('you suck') > -1) {
    $('#sad').css('display', 'block');
    $('#originalCube').css('display', 'none');
    $('#verySad').css('display', 'none');
    $("#hi").css("display", "none");
    $('#superhappy').css('display', 'none');
  }
  else if(text.indexOf('you really suck') > -1) {
    $('#verySad').css('display', 'block');
    $('#originalCube').css('display', 'none');
    $('#sad').css('display', 'none');
    $("#hi").css("display", "none");
    $('#superhappy').css('display', 'none');
  }
  else if(text.indexOf('love') > -1) {
    $('#originalCube').css('display', 'block');
    $('#sad').css('display', 'none');
    $('#verySad').css('display', 'none');
    $("#hi").css("display", "none");
    $('#superhappy').css('display', 'none');
  }
  else if(text.indexOf('happy birthday') > -1) {
    $('#superhappy').css('display', 'block');
    $('#sad').css('display', 'none');
    $('#originalCube').css('display', 'none');
    $('#verySad').css('display', 'none');
    $("#hi").css("display", "none");
  }
});
$('#textInput').keypress(function(e){
  if(e.which == 13){//Enter key pressed
      $('#arrowButton').click();//Trigger search button click event
  }
});
</script>

<script>
//Make cube jump

var canvas = document.getElementById("originalCube");
var ctx = canvas.getContext('2d');
// Gravity, how fast it goes down
var gravity = 0.13;

canvas.width = 783;
canvas.height = 510;

// Whether or not the up key is pressed
var keypressed = false;

// Load image
var img = new Image();
img.src = "img/base.png";

// Some grass
function Grass(x, y) {
    this.x = x;
    this.y = y;
    // How fast we are moving
    this.velocity = 0;
    this.image = img;
}

Grass.prototype.draw = function () {
    ctx.drawImage(this.image, this.x, this.y);
}

Grass.prototype.update = function() {
    // Check if we are underground
    if (this.y + this.velocity + 36 > 100) {
        // If so, move us back to ground level and set velocity to zero
        this.velocity = 0;
        this.y = 100 - 36;
    } else {
        // Otherwise, move what is indicated by velocity
        this.velocity += gravity;
        this.y += this.velocity;
    } 
}
var grass1 = new Grass(35, 986);

var requestAnim = window.requestAnimationFrame ||
                    window.webkitRequestAnimationFrame ||
                    window.mozRequestAnimationFrame ||
                    setInterval;

requestAnim(function loop() {
    // Clear the screen
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    // Redraw the grass where it is supposed to be
    grass1.draw();
    // If the key is pressed, set velocity to -5
    if (keypressed) {
        grass1.velocity = -5;
        keypressed = false;
    }
    grass1.update();
    // Do again
    requestAnim(loop);
});

document.addEventListener('keydown', function (e) {
    if (e.keyCode == '38') {
        keypressed = true;
    }
}, false);
  
</script>

</body>
</html>
